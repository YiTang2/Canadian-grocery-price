---
title: "Canadian grocery analysis"
author: 
  - Jin Zhang
  - Yitang
  - Siyuan Lu
thanks: "Code and data are available at: https://github.com/YiTang2/Canadian-grocery-price.git"
date: 14 November 2024
date-format: long
abstract: "In this paper, we collect historical grocery data from top Canadian grocery sector, clean it, and analyze the pricing strategies. Many items have remained the same price or become cheaper, showing that the grocery vendors tend to use competitive pricing strategies. The research can help drive more competition and reduce collusion in the Canadian grocery sector."
format: pdf
number-sections: true
toc: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(scales)
library(tidyverse)
library(ggplot2)
library(here)
library(knitr)
```
\newpage

# Introduction

The Canadian grocery sector is a dynamic marketplace characterized by a variety of pricing strategies that reflect the intense competition and efforts to avoid collusion among vendors. This paper aims to illuminate these pricing strategies by analyzing historical data from top Canadian grocery chains, focusing on how prices have changed over time and how different vendors position themselves in the market. Through this research, we seek to contribute to the broader discourse on market dynamics in retail, providing insights that could help drive more competition and reduce collusion across the sector.

This paper explores the relationship between current and old prices across various vendors, revealing that many products have either maintained their price point or become cheaper. Such findings suggest that Canadian grocery vendors frequently employ competitive pricing tactics, possibly as a response to market demand dynamics or as a strategy to capture greater market share. These pricing behaviors are crucial for understanding the competitive landscape and for policymakers aiming to foster fair competition.

The significance of this study lies in its potential to impact both economic research and practical policy-making. By providing a detailed analysis of pricing strategies and their effectiveness, this study offers valuable insights that could help shape strategies to enhance competitive practices and reduce anti-competitive behavior in the grocery sector.

The remainder of this paper is structured as follows. @sec-data discusses the overview and variables of the data, including graphs and analysis. @sec-result explains the findings of the paper. @sec-reference consists references of all data, software, and material. Finally, the Discussion section explores the implications of our findings, the study's limitations, and potential avenues for future research.



# Data {#sec-data}

## Overview

We got the Canadian Grocery Price Data from Jacob Filipp[@citedata]. We used R programming language [@citeR] to analyze the data and plot the graphs for this paper. We also used SQL [@sql_reference] to clean the raw data and generated the analysis dataset. The folder structure for this paper follows the startup folder created by [@rohan]. It is very helpful in keeping everything organized. I also referenced many of the examples and techniques provided by Telling Stories with Data [@alexander2023telling], which helped me understand how to visualize the data and communicate the findings effectively. In addition, the `tidyverse` [@citetidyverse] packages is essential for simplifying data cleaning and analysis.`styler` [@citestyler] used in arranging code style. These tools help to organize and present data efficiently. I also plotted the graphs with `ggplot2` [@citeggplot2] and read the csv file with `here` [@citehere]. We also use the `comma` function from the `scales`[@citescales] library to format the data, thereby avoiding scientific notation in our charts. We used the `knitr`[@citeknitr] to show the table.

All datas aim to foster competition and reduce market collusion in the Canadian grocery sector by assembling a database of historical grocery prices from prominent vendors. This dataset serves academic and legal purposes, enhancing transparency in grocery pricing strategies.The data encompasses prices from eight major grocery vendors in Canada, including Voila, TandT, Loblaws, and others. Below is the description for the variable we are taking to research:

- vendor: One of the 7 grocery vendors.
- current_price: Price at time of extract.
- old_price: An "old" struck-out price. This indicates that there was a Sale on. This is how you can differentiate a price-drop advertised as a Sale vs. a "quiet" decrease without a Sale.
- units: Units (grams, kg, number of items in package). May be blank for some vendors/products.

The dataset facilitates analysis through visualizations like price trends over time for products such as Becel Margarine and Sourdough Bread. Each visualization aids in comparing pricing strategies across different vendors and times. Exploratory data analysis provides insights into pricing patterns, with summary statistics highlighting average prices, standard deviations, and price ranges. Comparative analysis across vendors or periods can spotlight trends or anomalies in pricing behaviors.

## Measurement
	
The measurement process involves converting observed grocery pricing phenomena into a structured dataset. This transformation starts with the collection of price data from various Canadian grocery vendors' websites through screen-scraping techniques. Each price observation captures the 'current price' at the time of data collection and the 'old price', which indicates the previous price point before any discounts or changes. Prices are specifically for "in-store pickup" in Toronto, collected via screen-scraping of vendor websites. This method captures customer-facing prices but may miss details available in internal APIs.This approach allows us to trace price fluctuations over time and analyze market behaviors.

To ensure accuracy and relevance, the data is collected for items available for in-store pickup in a specific Toronto neighborhood, providing a consistent geographical context. The 'units' associated with each product, such as grams or kilograms, are noted to standardize price comparisons. This meticulous approach to data measurement facilitates a comprehensive analysis of pricing strategies across different vendors, revealing trends and potential collusive behaviors within the market.

## Graphs
Some of our data is of current price (@fig-current-price), from JacobFilipp @citedata.
```{r}
#| label: fig-current-price
#| fig-cap: Distribution of Current Prices in Canadian Grocery Sector
#| echo: false
#| warning: false
#| message: false

data <- read_csv(here::here("data","02-analysis_data","analysis_data.csv"))

# Applying a smaller bin width to better capture the distribution
ggplot(data, aes(x=current_price)) +
  geom_histogram(binwidth=1, fill="blue", color="black") +  # Set binwidth to 1 for finer granularity
  labs(x="Current Price ($)", y="Frequency") +
  xlim(0, 50)+  # Limiting x-axis to focus on the common price range
  scale_y_continuous(labels = comma)

```
@fig-current-price shows the distribution of current prices in the Canadian grocery sector. The x-axis of this histogram represents the range of current prices in Canadian dollars, while the y-axis indicates the frequency of each price point. This visualization allows us to see that most grocery items are priced under $10, showcasing a significant decline in frequency as prices increase. This distribution shows a concentration of more affordable items, with fewer high-priced items, indicating a price-sensitive market where cheaper products dominate the sales volume.


Some of our data is of price (@fig-current-price), from JacobFilipp @citedata.
```{r}
#| label: fig-vendor-price-distribution
#| fig-cap: Distribution of Prices by Vendor in Canadian Grocery Sector
#| echo: false
#| warning: false
#| message: false

ggplot(data, aes(x=vendor, y=log(current_price))) +
  geom_boxplot(fill="blue", color="black") +
  labs(x="Vendor", y="Log of Current Price ($)") +
  theme_minimal()  # Applying a minimalistic theme
```
@fig-vendor-price-distribution shows the logarithmic distribution of prices by different vendors in the Canadian grocery sector, using a box plot for each vendor. The x-axis categorizes the vendors, and the y-axis shows the logarithm of current prices, which shows the wide range of prices and highlighting the differences in price distributions across vendors. Each box plot provides the median, interquartile range (IQR), and potential outliers, revealing variability in pricing strategies among vendors. For instance, some vendors show a wider range of prices, indicating a diverse product mix, while others have more compact distributions, suggesting more consistent pricing across their products.


Some of our data is of comparison of price (@fig-price-comparison), from JacobFilipp @citedata.
```{r}
#| label: fig-price-comparison
#| fig-cap: Comparison of Old and Current Prices in Canadian Grocery Sector
#| echo: false
#| warning: false
#| message: false


ggplot(data, aes(x=old_price, y=current_price)) +
  geom_point(color="blue",alpha=0.1) +
  labs(x="Old Price ($)", y="Current Price ($)") +
  xlim(0, 100) + ylim(0, 100) +
  geom_abline(intercept=0, slope=1, linetype="dashed", color="red")  # Reference line for equal prices

```
@fig-price-comparison visualizes the relationship between old and current prices of grocery items in a scatter plot. The x-axis represents the old prices, and the y-axis the current prices, both in Canadian dollars. The diagonal red dashed line indicates where the old and current prices are equal. Points below this line represent price drops, while points above indicate price increases. This graph reveals a significant cluster of points along and below the line, suggesting that many items have remained the same price or become cheaper. This could indicate competitive pricing tactics or responses to market demand dynamics.

\newpage

# Results {#sec-result}

```{r}
#| label: table-summary-statistics-current-price
#| fig-cap: Summary Statistics for Current Prices in the Canadian Grocery Sector
#| echo: false
#| warning: false
#| message: false


# Read the data
data <- read_csv(here::here("data","02-analysis_data","analysis_data.csv"), show_col_types = FALSE)

# Compute summary statistics for current prices
current_price_stats <- data |> 
  summarise(
    Mean = mean(current_price, na.rm = TRUE),
    Median = median(current_price, na.rm = TRUE),
    SD = sd(current_price, na.rm = TRUE),
    Min = min(current_price, na.rm = TRUE),
    Max = max(current_price, na.rm = TRUE)
  )
knitr::kable(current_price_stats)
```

@table-summary-statistics-current-price for current prices in the Canadian grocery sector reveal a diverse and competitive pricing landscape. The average price, represented by the mean, alongside the median, provides insight into typical consumer costs, suggesting a market geared towards affordability. The standard deviation highlights significant variability in prices, indicating a range of low to high-cost options available to consumers. The minimum and maximum values delineate the full spectrum of pricing, from the most economical to premium offerings, underscoring the market's breadth in catering to varied consumer needs and preferences. These statistics collectively demonstrate a dynamic market where vendors employ different pricing strategies to attract a broad consumer base.
```{r}
#| label: table-summary-statistics-vendor-price
#| fig-cap: Summary Statistics for vendor Prices in the Canadian Grocery Sector
#| echo: false
#| warning: false
#| message: false

# Generate boxplot summary statistics by vendor
vendor_price_stats <- data |>
  group_by(vendor) |>
  summarise(
    Mean = mean(log(current_price + 1), na.rm = TRUE),
    Median = median(log(current_price + 1), na.rm = TRUE),
    SD = sd(log(current_price + 1), na.rm = TRUE),
    Min = min(log(current_price + 1), na.rm = TRUE),
    Max = max(log(current_price + 1), na.rm = TRUE)
  )
knitr::kable(vendor_price_stats)
```

The summary statistics for log-transformed current prices by vendor illustrate the varied pricing strategies across different grocery vendors in the Canadian market. The mean and median provide insights into the central tendency of prices on a logarithmic scale, indicating how each vendor positions itself price-wise within the market. The standard deviation reflects the diversity in each vendor's product pricing, revealing the range from basic to premium products they offer. The minimum and maximum values highlight the extremities of pricing for each vendor, capturing the cheapest and most expensive options available. These statistics underscore the competitive dynamics within the grocery sector, showing how vendors differentiate themselves through pricing to cater to different segments of the consumer market.

# Discussion

This paper systematically analyzes the Canadian grocery market's pricing behaviors by comparing current and historical prices across various vendors. Through visual and statistical analysis, it identifies patterns and strategies in the pricing mechanisms employed by these retailers.
The findings illuminate a highly competitive market environment where grocery vendors aggressively price their products to capture consumer interest. The prevalence of lower-priced goods underscores a strategic emphasis on affordability, potentially a response to consumer demand for value in everyday purchases.
Differential pricing strategies among vendors reveal diverse approaches to market segmentation. Some vendors opt for a broad range of product prices, possibly catering to varied consumer segments, while others maintain tighter price clusters, indicating a focus on specific market niches.
The primary limitation of this study arises from its data collection method—screen scraping—which might not capture all relevant pricing details or temporary promotional offers. This could lead to incomplete or skewed insights into the actual pricing dynamics.
Future research could enhance the robustness of findings by integrating direct API access for real-time pricing data and expanding the geographical scope of data collection. Further investigation could also explore the impact of external economic factors on pricing strategies, providing a more comprehensive understanding of market forces and consumer behavior.

\newpage


# References {#sec-reference}


